<div class="dashboard-container">
  <!-- Loading State -->
  @if (uiState()?.loading) {
    <app-loader message="Loading dashboard..." size="large"></app-loader>
  }

  <!-- Error State -->
  @if (uiState()?.error) {
    <app-error-display
      title="Oops! Something went wrong"
      [message]="uiState()?.error ?? 'An unexpected error occurred'"
      (retry)="onRetry()"
    >
    </app-error-display>
  }

  <!-- Empty State -->
  @if (uiState()?.isEmpty) {
    <app-empty-state
      icon="folder_open"
      title="No Projects Yet"
      message="Create your first project to get started!"
    >
      <button mat-raised-button color="primary" (click)="onCreateProject()">
        <mat-icon>add</mat-icon>
        Create Project
      </button>
    </app-empty-state>
  }

  <!-- Dashboard Content -->
  @if (uiState()?.hasData && !uiState()?.loading) {
    <div class="dashboard-content">
      <!-- Stats Section -->
      <app-stats-widget [stats]="stats() ?? null"></app-stats-widget>

      <!-- Projects and Activity Grid -->
      <div class="content-grid">
        <!-- Projects Section -->
        <section class="projects-section">
          <div class="section-header">
            <h2>
              <mat-icon>folder</mat-icon>
              Projects
            </h2>
            <button mat-raised-button color="primary" (click)="onCreateProject()">
              <mat-icon>add</mat-icon>
              New Project
            </button>
          </div>

          <div class="projects-grid">
            @for (project of projects(); track project.id) {
              <app-project-card
                [project]="project"
                [selected]="selectedProjectId() === project.id"
                (view)="onSelectProject($event)"
                (edit)="onEditProject($event)"
                (delete)="onDeleteProject($event)"
              >
              </app-project-card>
            }
          </div>
        </section>

        <!-- Recent Activity Section -->
        <aside class="activity-section">
          <app-activity-feed [activities]="activities()"></app-activity-feed>
        </aside>
      </div>
    </div>
  }
</div>
